/*
 * This file has been generated by Oats, please don't modify it by hand!
 *
 * Generated from https://raw.githubusercontent.com/oats-ts/oats-schemas/master/generated-schemas/methods.json
 */

import { Router } from 'express'
import {
  createDeleteMethodRouter,
  createGetMethodRouter,
  createOptionsMethodRouter,
  createPatchMethodRouter,
  createPostMethodRouter,
  createPutMethodRouter,
} from './expressRoutes'
import { HttpMethodsRouters } from './expressRoutesType'

export function createHttpMethodsRouter(router?: Router, overrides: Partial<HttpMethodsRouters> = {}): Router {
  const root = router ?? Router()
  const factories = [
    overrides.createGetMethodRouter ?? createGetMethodRouter,
    overrides.createPostMethodRouter ?? createPostMethodRouter,
    overrides.createPutMethodRouter ?? createPutMethodRouter,
    overrides.createPatchMethodRouter ?? createPatchMethodRouter,
    overrides.createOptionsMethodRouter ?? createOptionsMethodRouter,
    overrides.createDeleteMethodRouter ?? createDeleteMethodRouter,
  ]
  const uniqueRouters = factories.reduce((routers: Router[], factory: (router?: Router) => Router): Router[] => {
    const childRouter = factory(root)
    return childRouter === root ? routers : [...routers, childRouter]
  }, [])
  return uniqueRouters.length === 0 ? root : root.use(...uniqueRouters)
}
